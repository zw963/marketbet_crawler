<%
next_earnings_date = stock[:next_earnings_date]
if next_earnings_date.present?
  date_time_difference = (next_earnings_date - Date.today).to_i

  case date_time_difference
  when 0
    color = 'red lighten-1'
  when 1
    color = 'red lighten-3'
  when 2
    color = 'red lighten-5'
  end
end
%>

<tr>
  <td><%= stock[:id] %></td>
  <td><a href="/stocks/<%= stock[:id] %>"><%= stock.display_name %></a></td>
  <td><%= stock[:exchange_name] %></td>
  <td><%= stock[:percent_of_institutions] ? "#{(stock[:percent_of_institutions]*100).to_f}%" : "0.00%" %></td>
  <td><%= stock[:ipo_amount].to_i %></td>
  <td><%= stock[:ipo_price] %></td>
  <td><%= stock[:ipo_placement] %></td>
  <td><%= stock[:ipo_date] %></td>
  <td class="<%= color %>"><%= next_earnings_date %></td>
</tr>
