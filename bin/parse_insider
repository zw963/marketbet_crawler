#!/usr/bin/env ruby
require_relative '../config/environment'
require_relative '../config/parser_loader'

ins = InsiderHistoryParser.instance

symbols = %w(
  nasdaq/arry nasdaq/fldm nasdaq/momo
  nyse/stm nyse/nclh nasdaq/cron nyse/pltr nasdaq/ttcf
  nasdaq/kopn nasdaq/afrm nasdaq/cree nasdaq/ino nyse/ai
  otcmkts/wcagy nyse/cnk lon/rr nyse/ge nasdaq/bmbl
  nyse/fsly nasdaq/wish nyse/dash nyse/qs nyseamerican/eman
  nyse/fubo nasdaq/nkla nyse/erj nasdaq/lab nyse/ccl
)

if ARGV[0]
  ins.symbols = [ARGV[0]]
else
  ins.symbols = symbols
end

file = File.open('tmp/parse_insider_done',  'a')
file.puts '*'*100
file.puts "Start #{Time.now.strftime('%Y-%m-%d %H:%M:%S %A')}"

ins.run

file.puts "End #{Time.now.strftime('%Y-%m-%d %H:%M:%S %A')}"
file.close
